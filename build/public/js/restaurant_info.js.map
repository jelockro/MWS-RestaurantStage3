{"version":3,"sources":["restaurant_info.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","document","addEventListener","event","initMap","fetchRestaurantFromURL","error","restaurant","console","self","newMap","L","map","center","latlng","lat","lng","zoom","scrollWheelZoom","tileLayer","mapboxToken","maxZoom","attribution","id","addTo","fillBreadcrumb","DBHelper","mapMarkerForRestaurant","callback","getParameterByName","fetchRestaurantById","fillRestaurantHTML","arguments","undefined","getElementById","innerHTML","name","address","image","className","imgparts","imageUrlForRestaurant","split","imgurl1x","imgurl2x","src","srcset","alt","cuisine_type","operating_hours","fillRestaurantHoursHTML","fillReviewsHTML","operatingHours","hours","key","row","createElement","day","trim","appendChild","time","reviews","container","title","noReviews","ul","forEach","review","createReviewHTML","li","date","rating","comments","breadcrumb","url","window","location","href","replace","results","RegExp","exec","decodeURIComponent"],"mappings":"CAAY,SAASA,EAAEC,EAAEC,EAAEC,GAAG,SAASC,EAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,IAAIE,EAAE,mBAAmBC,SAASA,QAAQ,IAAIF,GAAGC,EAAE,OAAOA,EAAEF,GAAE,GAAI,GAAGI,EAAE,OAAOA,EAAEJ,GAAE,GAAI,IAAIK,EAAE,IAAIC,MAAM,uBAAuBN,EAAE,KAAK,MAAMK,EAAEE,KAAK,mBAAmBF,EAAE,IAAIG,EAAEX,EAAEG,GAAG,CAACS,QAAQ,IAAIb,EAAEI,GAAG,GAAGU,KAAKF,EAAEC,QAAQ,SAASd,GAAoB,OAAOI,EAAlBH,EAAEI,GAAG,GAAGL,IAAeA,IAAIa,EAAEA,EAAEC,QAAQd,EAAEC,EAAEC,EAAEC,GAAG,OAAOD,EAAEG,GAAGS,QAAQ,IAAI,IAAIL,EAAE,mBAAmBD,SAASA,QAAQH,EAAE,EAAEA,EAAEF,EAAEa,OAAOX,IAAID,EAAED,EAAEE,IAAI,OAAOD,EAA7b,CAA4c,CAACa,EAAE,CAAC,SAAST,EAAQU,EAAOJ,GACxe,aAQAK,SAASC,iBAAiB,mBAAoB,SAAUC,GACtDC,YAMFA,QAAU,WACRC,uBAAuB,SAAUC,EAAOC,GAClCD,EAEFE,QAAQF,MAAMA,IAEdG,KAAKC,OAASC,EAAEC,IAAI,MAAO,CACzBC,OAAQ,CAACN,EAAWO,OAAOC,IAAKR,EAAWO,OAAOE,KAClDC,KAAM,GACNC,iBAAiB,IAEnBP,EAAEQ,UAAU,oFAAqF,CAC/FC,YAAa,6FACbC,QAAS,GACTC,YAAa,0NACbC,GAAI,mBACHC,WA5BLd,GA6BEe,iBACAC,SAASC,uBAAuBlB,KAAKF,WAAYE,KAAKC,YAwB5DL,uBAAyB,SAAgCuB,GACvD,GAAInB,KAAKF,WAEPqB,EAAS,KAAMnB,KAAKF,gBAFtB,CAKA,IAAIgB,EAAKM,mBAAmB,MACvBN,EAKHG,SAASI,oBAAoBP,EAAI,SAAUjB,EAAOC,IAChDE,KAAKF,WAAaA,IAKlBwB,qBACAH,EAAS,KAAMrB,IAJbC,QAAQF,MAAMA,MANlBA,MAAQ,0BACRsB,EAAStB,MAAO,SAiBpByB,mBAAqB,WACnB,IAAIxB,EAAgC,EAAnByB,UAAUlC,aAA+BmC,IAAjBD,UAAU,GAAmBA,UAAU,GAAKvB,KAAKF,WAE/EN,SAASiC,eAAe,mBAC9BC,UAAY5B,EAAW6B,KAEdnC,SAASiC,eAAe,sBAC9BC,UAAY5B,EAAW8B,QAE/B,IAAIC,EAAQrC,SAASiC,eAAe,kBACpCI,EAAMC,UAAY,iBAClB,IACIC,EADad,SAASe,sBAAsBlC,EAAY,WAClCmC,MAAM,KAE5BC,EAAW,gBAAkBH,EAAS,GAAK,iBAC3CI,EAAW,gBAAkBJ,EAAS,GAAK,iBAC/CF,EAAMO,IAAMF,EACZL,EAAMQ,OAASH,EAAW,UAAYC,EAAW,QACjDN,EAAMS,IAAMxC,EAAW6B,KAAO,gCAChBnC,SAASiC,eAAe,sBAC9BC,UAAY5B,EAAWyC,aAG3BzC,EAAW0C,iBACbC,0BAGFC,mBAMFD,wBAA0B,WACxB,IAAIE,EAAoC,EAAnBpB,UAAUlC,aAA+BmC,IAAjBD,UAAU,GAAmBA,UAAU,GAAKvB,KAAKF,WAAW0C,gBAErGI,EAAQpD,SAASiC,eAAe,oBACpC,IAAK,IAAIoB,KAAOF,EAAgB,CAC9B,IAAIG,EAAMtD,SAASuD,cAAc,MAE7BC,EAAMxD,SAASuD,cAAc,MACjCC,EAAItB,UAAYmB,EAAII,OACpBH,EAAII,YAAYF,GAEhB,IAAIG,EAAO3D,SAASuD,cAAc,MAClCI,EAAKzB,UAAYiB,EAAeE,GAAKI,OACrCH,EAAII,YAAYC,GAEhBP,EAAMM,YAAYJ,KAOtBJ,gBAAkB,WAChB,IAAIU,EAA6B,EAAnB7B,UAAUlC,aAA+BmC,IAAjBD,UAAU,GAAmBA,UAAU,GAAKvB,KAAKF,WAAWsD,QAE9FC,EAAY7D,SAASiC,eAAe,qBACpC6B,EAAQ9D,SAASuD,cAAc,MAInC,GAHAO,EAAM5B,UAAY,UAClB2B,EAAUH,YAAYI,IAEjBF,EAAS,CACZ,IAAIG,EAAY/D,SAASuD,cAAc,KAGvC,OAFAQ,EAAU7B,UAAY,uBACtB2B,EAAUH,YAAYK,GAGxB,IAAIC,EAAKhE,SAASiC,eAAe,gBACjC2B,EAAQK,QAAQ,SAAUC,GACxBF,EAAGN,YAAYS,iBAAiBD,MAElCL,EAAUH,YAAYM,IAMxBG,iBAAmB,SAA0BD,GAC3C,IAAIE,EAAKpE,SAASuD,cAAc,MAC5BpB,EAAOnC,SAASuD,cAAc,KAClCpB,EAAKD,UAAYgC,EAAO/B,KACxBA,EAAKG,UAAY,yBACjB8B,EAAGV,YAAYvB,GAEf,IAAIkC,EAAOrE,SAASuD,cAAc,KAClCc,EAAKnC,UAAYgC,EAAOG,KACxBD,EAAGV,YAAYW,GAEf,IAAIC,EAAStE,SAASuD,cAAc,KACpCe,EAAOpC,UAAY,WAAagC,EAAOI,OACvCA,EAAOhC,UAAY,gBACnB8B,EAAGV,YAAYY,GAEf,IAAIC,EAAWvE,SAASuD,cAAc,KAItC,OAHAgB,EAASrC,UAAYgC,EAAOK,SAC5BH,EAAGV,YAAYa,GAERH,GAMT5C,eAAiB,WACf,IAAIlB,EAAgC,EAAnByB,UAAUlC,aAA+BmC,IAAjBD,UAAU,GAAmBA,UAAU,GAAKvB,KAAKF,WAEtFkE,EAAaxE,SAASiC,eAAe,cACrCmC,EAAKpE,SAASuD,cAAc,MAChCa,EAAGlC,UAAY5B,EAAW6B,KAC1BqC,EAAWd,YAAYU,IAMzBxC,mBAAqB,SAA4BO,EAAMsC,GAChDA,IAAKA,EAAMC,OAAOC,SAASC,MAChCzC,EAAOA,EAAK0C,QAAQ,UAAW,QAC/B,IACIC,EADQ,IAAIC,OAAO,OAAS5C,EAAO,qBACnB6C,KAAKP,GACzB,OAAKK,EACAA,EAAQ,GACNG,mBAAmBH,EAAQ,GAAGD,QAAQ,MAAO,MAD5B,GADH,OAKrB,KAAK,GAAG,CAAC","file":"restaurant_info.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n'use strict';\n\nvar restaurant = void 0;\nvar newMap;\n\n/**\n * Initialize map as soon as the page is loaded.\n */\ndocument.addEventListener('DOMContentLoaded', function (event) {\n  initMap();\n});\n\n/**\n * Initialize leaflet map\n */\ninitMap = function initMap() {\n  fetchRestaurantFromURL(function (error, restaurant) {\n    if (error) {\n      // Got an error!\n      console.error(error);\n    } else {\n      self.newMap = L.map('map', {\n        center: [restaurant.latlng.lat, restaurant.latlng.lng],\n        zoom: 16,\n        scrollWheelZoom: false\n      });\n      L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.jpg70?access_token={mapboxToken}', {\n        mapboxToken: 'pk.eyJ1IjoiamVsb2Nrcm8iLCJhIjoiY2ppZXoydmUxMGg5ZjNrb2Nuc3l0N2J0MSJ9.DVVsqyqurrIcRVgdKmGU-Q',\n        maxZoom: 18,\n        attribution: 'Map data &copy; <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a> contributors, ' + '<a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, ' + 'Imagery Â© <a href=\"https://www.mapbox.com/\">Mapbox</a>',\n        id: 'mapbox.streets'\n      }).addTo(newMap);\n      fillBreadcrumb();\n      DBHelper.mapMarkerForRestaurant(self.restaurant, self.newMap);\n    }\n  });\n};\n\n/* window.initMap = () => {\n  fetchRestaurantFromURL((error, restaurant) => {\n    if (error) { // Got an error!\n      console.error(error);\n    } else {\n      self.map = new google.maps.Map(document.getElementById('map'), {\n        zoom: 16,\n        center: restaurant.latlng,\n        scrollwheel: false\n      });\n      fillBreadcrumb();\n      DBHelper.mapMarkerForRestaurant(self.restaurant, self.map);\n    }\n  });\n} */\n\n/**\n * Get current restaurant from page URL.\n */\nfetchRestaurantFromURL = function fetchRestaurantFromURL(callback) {\n  if (self.restaurant) {\n    // restaurant already fetched!\n    callback(null, self.restaurant);\n    return;\n  }\n  var id = getParameterByName('id');\n  if (!id) {\n    // no id found in URL\n    error = 'No restaurant id in URL';\n    callback(error, null);\n  } else {\n    DBHelper.fetchRestaurantById(id, function (error, restaurant) {\n      self.restaurant = restaurant;\n      if (!restaurant) {\n        console.error(error);\n        return;\n      }\n      fillRestaurantHTML();\n      callback(null, restaurant);\n    });\n  }\n};\n\n/**\n * Create restaurant HTML and add it to the webpage\n */\nfillRestaurantHTML = function fillRestaurantHTML() {\n  var restaurant = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : self.restaurant;\n\n  var name = document.getElementById('restaurant-name');\n  name.innerHTML = restaurant.name;\n\n  var address = document.getElementById('restaurant-address');\n  address.innerHTML = restaurant.address;\n\n  var image = document.getElementById('restaurant-img');\n  image.className = 'restaurant-img';\n  var imgurlbase = DBHelper.imageUrlForRestaurant(restaurant, 'banners');\n  var imgparts = imgurlbase.split('/');\n  //console.log(imgparts);\n  var imgurl1x = \"/img/banners/\" + imgparts[3] + '-banner_1x.jpg';\n  var imgurl2x = \"/img/banners/\" + imgparts[3] + '-banner_2x.jpg';\n  image.src = imgurl1x;\n  image.srcset = imgurl1x + ' 300w, ' + imgurl2x + ' 600w';\n  image.alt = restaurant.name + ' restaurant promotional image';\n  var cuisine = document.getElementById('restaurant-cuisine');\n  cuisine.innerHTML = restaurant.cuisine_type;\n\n  // fill operating hours\n  if (restaurant.operating_hours) {\n    fillRestaurantHoursHTML();\n  }\n  // fill reviews\n  fillReviewsHTML();\n};\n\n/**\n * Create restaurant operating hours HTML table and add it to the webpage.\n */\nfillRestaurantHoursHTML = function fillRestaurantHoursHTML() {\n  var operatingHours = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : self.restaurant.operating_hours;\n\n  var hours = document.getElementById('restaurant-hours');\n  for (var key in operatingHours) {\n    var row = document.createElement('tr');\n\n    var day = document.createElement('td');\n    day.innerHTML = key.trim();\n    row.appendChild(day);\n\n    var time = document.createElement('td');\n    time.innerHTML = operatingHours[key].trim();\n    row.appendChild(time);\n\n    hours.appendChild(row);\n  }\n};\n\n/**\n * Create all reviews HTML and add them to the webpage.\n */\nfillReviewsHTML = function fillReviewsHTML() {\n  var reviews = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : self.restaurant.reviews;\n\n  var container = document.getElementById('reviews-container');\n  var title = document.createElement('h2');\n  title.innerHTML = 'Reviews';\n  container.appendChild(title);\n\n  if (!reviews) {\n    var noReviews = document.createElement('p');\n    noReviews.innerHTML = 'No reviews yet!';\n    container.appendChild(noReviews);\n    return;\n  }\n  var ul = document.getElementById('reviews-list');\n  reviews.forEach(function (review) {\n    ul.appendChild(createReviewHTML(review));\n  });\n  container.appendChild(ul);\n};\n\n/**\n * Create review HTML and add it to the webpage.\n */\ncreateReviewHTML = function createReviewHTML(review) {\n  var li = document.createElement('li');\n  var name = document.createElement('p');\n  name.innerHTML = review.name;\n  name.className = 'restaurant-review-user';\n  li.appendChild(name);\n\n  var date = document.createElement('p');\n  date.innerHTML = review.date;\n  li.appendChild(date);\n\n  var rating = document.createElement('p');\n  rating.innerHTML = 'Rating: ' + review.rating;\n  rating.className = 'review-rating';\n  li.appendChild(rating);\n\n  var comments = document.createElement('p');\n  comments.innerHTML = review.comments;\n  li.appendChild(comments);\n\n  return li;\n};\n\n/**\n * Add restaurant name to the breadcrumb navigation menu\n */\nfillBreadcrumb = function fillBreadcrumb() {\n  var restaurant = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : self.restaurant;\n\n  var breadcrumb = document.getElementById('breadcrumb');\n  var li = document.createElement('li');\n  li.innerHTML = restaurant.name;\n  breadcrumb.appendChild(li);\n};\n\n/**\n * Get a parameter by name from page URL.\n */\ngetParameterByName = function getParameterByName(name, url) {\n  if (!url) url = window.location.href;\n  name = name.replace(/[\\[\\]]/g, '\\\\$&');\n  var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),\n      results = regex.exec(url);\n  if (!results) return null;\n  if (!results[2]) return '';\n  return decodeURIComponent(results[2].replace(/\\+/g, ' '));\n};\n\n},{}]},{},[1]);\n"]}